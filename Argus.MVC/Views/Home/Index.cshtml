@model IEnumerable<Argus.MVC.Models.ApplicationModel>

@{
	ViewData["Title"] = "Home";
	string fontAwesomeCdnSource = "https://use.fontawesome.com/" + @ViewBag.FontAwesomeKey + ".js";
}

<script src="@fontAwesomeCdnSource"></script>

<div class="text-center">
	<h1 class="display-4">Argus - System Monitor</h1>
	<p>Status as of @DateTime.Now.</p>
</div>
<div class="row">
	@* Static card to illustrate issue-free application. *@
	<div class="col-sm-4">
		<div class="card mb-3">
			<h5 class="card-header text-white bg-success">
				Application 0
				<i class="fa fa-eye-slash fa-2 fa-clickable float-right" aria-hidden="true"></i>
			</h5>
			<div class="card-body">
				<p>
					<span class="font-weight-bold">Product Owner: </span>
					Beth Smith
					<br />
					<span class="font-weight-bold">Team: </span>
					Team_5
				</p>
				<button type="button" class="btn btn-block bg-success text-white rounded-pill">
					Reports <span class="badge badge-light">0</span>
				</button>
				<a href="#" class="btn btn-block btn-success rounded-pill">Report a problem</a>
			</div>
		</div>
	</div>

	@foreach (var app in Model)
	{
		string cssClassByIssueCount = "bg-success";
		string cssTextColor = "text-white";

		if (app.HasUrgentPriority || app.IssueCount >= 3)
		{
			cssClassByIssueCount = "bg-danger";
		}
		else if (app.IssueCount >= 1)
		{
			cssClassByIssueCount = "bg-warning";
			cssTextColor = "text-dark";
		}

		<div class="col-sm-4" data-id="@app.Id">
			<div class="card mb-3">
				<h5 class="card-header @cssTextColor @cssClassByIssueCount">
					@app.Name
				<i class="fa fa-eye-slash fa-2 fa-clickable float-right" aria-hidden="true"></i>
			</h5>
			<div class="card-body">
				<p class="card-text">
					<span class="font-weight-bold">Product Owner: </span>
					@app.ProductOwnerName
					<br />
					<span class="font-weight-bold">Team: </span>
					@app.TeamName
				</p>
				<button type="button" class="btn btn-block @cssClassByIssueCount @cssTextColor rounded-pill">
					Reports <span class="badge badge-light">@app.IssueCount</span>
				</button>
				<a href="#" class="btn btn-block @cssClassByIssueCount @cssTextColor rounded-pill">Report a problem</a>
			</div>
		</div>
	</div>
}
</div>